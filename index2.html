<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Exam-2-andrea-arismendy by acarismendy</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <script type="text/javascript" src="d3.js"></script>
  </head>
  <body>
    <div class="header">
      <h1>Spreadsheet with Typical Sorting</h1>
    </div>
    <div class="content">
      <table id="spreadsheet">
        <thead>
          <th class="headingItem">Item No</th>
          <th class="headingA">A</th>
          <th class="headingB">B</th>
          <th class="headingC">C</th>
          <th class="headingD">D</th>
          <th class="headingE">E</th>
          <th class="headingF">F</th>
          <th class="headingG">G</th>
        </thead>
        <tbody>
          
        </tbody>
      </table>
      <p>The data presented by the table was obtained from http://hivelab.org/static/exam2.json</p>
    </div>
    
    <script type="text/javascript">
      d3.json("data.json",function(data){
       
         var row=d3.select("tbody")
        for(var i=0;i<data.length;i++){
            row.append("tr");
            row.append("td").text(data[i].ItemNo);
            row.append("td")
                .text(data[i].A);
            row.append("td").text(data[i].B);
            row.append("td").text(data[i].C);
            row.append("td").text(data[i].D);
            row.append("td").text(data[i].E);
            row.append("td").text(data[i].F);
            row.append("td").text(data[i].G);
          };
          function transform(attrName) {
              d3.select("tbody").selectAll("tr").remove();
          
          // Header
              var th = d3.select("thead").selectAll("th")
                      .data(jsonToArray(data[0]))
                      .enter().append("th")
                      .attr("onclick", function (d, i) { return "transform('" + d[0] + "');";})
                      .text(function(d) { return d[0]; })
          
          // Rows
              var tr = d3.select("tbody").selectAll("tr")
                      .data(data)
                      .enter().append("tr")
                      .sort(function (a, b) { return a == null || b == null ? 0 : d3.ascending(a,b); });
          
          // Cells
              var td = tr.selectAll("td")
                      .data(function(d) { return jsonToArray(d); })
                    .enter().append("td")
                      .attr("onclick", function (d, i) { return "transform('" + d[0] + "');";})
                      .text(function(d) { return d[1]; });
          
          }
//var  heading=d3.selectAll("th")
  //             .on("click",function(d){
  //               var selection=d3.select(this);
  //               if(selection.classed("headingItem")===true){
  //                row.sort(function(a,b){return d3.ascending(a,b);})
  //                //.attr("style","background-color:#CCCC00")
  //               }
  //             });     
        
     
      });
    </script>
  </body>
  
</html>  
