<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Exam-2-andrea-arismendy by acarismendy</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <script type="text/javascript" src="d3.js"></script>
  </head>
  <body>
    <div class="header">
      <h1>Spreadsheet with Typical Sorting</h1>
    </div>
    <div class="content">
      <table id="spreadsheet">
        <thead>
          <th class="ItemNo">Item No</th>
          <th class="A">A</th>
          <th class="B">B</th>
          <th class="C">C</th>
          <th class="D">D</th>
          <th class="E">E</th>
          <th class="F">F</th>
          <th class="G">G</th>
        </thead>
        <tbody>
          
        </tbody>
      </table>
      <p>The data presented by the table was obtained from http://hivelab.org/static/exam2.json</p>
    </div>
    
    <script type="text/javascript">
      d3.json("data.json",function(data){
         var row=d3.select("tbody");
         
        for(var i=0;i<data.length;i++){
            row.append("tr");
            row.append("td").text(data[i].ItemNo).attr("class","rows");
            row.append("td").text(data[i].A).attr("class","rows");
            row.append("td").text(data[i].B).attr("class","rows");
            row.append("td").text(data[i].C).attr("class","rows");
            row.append("td").text(data[i].D).attr("class","rows");
            row.append("td").text(data[i].E).attr("class","rows");
            row.append("td").text(data[i].F).attr("class","rows");
            row.append("td").text(data[i].G).attr("class","rows");
            
          };
          var headers=d3.keys(data[0]);
          console.log(headers);
         var  heading=d3.selectAll("th")
               .on("click",function(d){
                 d3.select(this).attr("style","background-color:#cccc00");
              var  criterion=d3.select(this)
                    .attr("class");
              var dataSet=data
                          .sort(function(a,b){return d3.ascending(a[criterion],b[criterion]);});
                          console.log(data);
                          console.log(dataSet);
                //Erase previous rows
                d3.selectAll(".rows").remove();
                 
                // d3.selectAll("th").append("th").text(data[0]);
                 var row=d3.select("tbody");
         
                for(var i=0;i<dataSet.length;i++){
                    row.append("tr");
                    row.append("td").text(dataSet[i].ItemNo);
                    row.append("td").text(dataSet[i].A);
                    row.append("td").text(dataSet[i].B);
                    row.append("td").text(dataSet[i].C);
                    row.append("td").text(dataSet[i].D);
                    row.append("td").text(dataSet[i].E);
                    row.append("td").text(dataSet[i].F);
                    row.append("td").text(dataSet[i].G);
                    
                  };
               });  
               
      });
      </script>
      
  </body>
  
</html>  
